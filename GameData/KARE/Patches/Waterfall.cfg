@PART[kare_eng_*]:NEEDS[Waterfall]
{
	@EFFECTS
	{
		@running_open
		{
			!MODEL_MULTI_PARTICLE,* {}
		}
		@running_closed
		{
			!MODEL_MULTI_PARTICLE,* {}
		}
	}
}

@PART[kare_eng_ntj_s1a]:NEEDS[Waterfall,StockWaterfallEffects]
{
	MODULE
	{
		name = ModuleWaterfallFX
		moduleID = ANP-04-AirBreathing
		engineID = AirBreathing
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
		}
		CONTROLLER
		{
			name = mach
			linkedTo = mach
		}
		TEMPLATE
		{
			templateName = stock-kerozine-turbofan-1
			overrideParentTransform = thrustTransform
			position = 0, 0, 0
			rotation = 0, 0, 0
			scale = 1, 1, 1
		}
	}
}

@PART[kare_eng_ntj_s1b]:NEEDS[Waterfall,StockWaterfallEffects]
{
	MODULE
	{
		name = ModuleWaterfallFX
		moduleID = ANP-08-AirBreathing
		engineID = AirBreathing
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
		}
		CONTROLLER
		{
			name = mach
			linkedTo = mach
		}
		TEMPLATE
		{
			templateName = stock-kerozine-afterburner
			overrideParentTransform = thrustTransform
			position = 0, 0, 0
			rotation = 0, 0, 0
			scale = 1.45, 1.45, 1.45
		}
	}
}

@PART[kare_eng_ntj_mk2]:NEEDS[Waterfall]
{
	MODULE:NEEDS[StockWaterfallEffects]
	{
		name = ModuleWaterfallFX
		moduleID = ANP-09-AirBreathing
		engineID = AirBreathing
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
		}
		CONTROLLER
		{
			name = mach
			linkedTo = mach
		}
		TEMPLATE
		{
			templateName = stock-kerozine-afterburner
			overrideParentTransform = thrustTransform
			position = 0, 0, 0
			rotation = 0, 0, 0
			scale = 1.18, 1.18, 1.18
		}
	}
	MODULE
	{
		name = ModuleWaterfallFX
		moduleID = ANP-09-ClosedCycle
		engineID = ClosedCycle
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
		}
		TEMPLATE
		{
			templateName = stock-nuclear-upper-2
			overrideParentTransform = thrustTransform
			position = 0, 0, -1.3
			rotation = 0, 0, 0
			scale = 1.2, 1.2, 1.5
		}
	}
}

@PART[kare_eng_ntj_s2]:NEEDS[Waterfall]
{
	MODULE
	{
		name = ModuleWaterfallFX
		moduleID = ANP-13-AirBreathing
		engineID = AirBreathing
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
		}
		CONTROLLER
		{
			name = mach
			linkedTo = mach
		}
		TEMPLATE
		{
			templateName = stock-kerozine-afterburner
			overrideParentTransform = thrustTransform
			position = 0, 0, 0
			rotation = 0, 0, 0
			scale = 1.8, 1.8, 1.8
		}
	}
	MODULE
	{
		name = ModuleWaterfallFX
		moduleID = ANP-13-ClosedCycle
		engineID = ClosedCycle
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
		}
		TEMPLATE
		{
			templateName = stock-nuclear-upper-2 // waterfall-ntr-lh2-1
			overrideParentTransform = thrustTransform
			position = 0, 0, -2
			rotation = 0, 0, 0
			scale = 2, 2, 2.5
		}
	}
}